!function(t,e){"function"==typeof define&&define.amd?define(["exports"],function(n){t.easysseClient=e(t,n)}):"undefined"!=typeof exports?e(t,exports):t.easysseClient=e(t,{})}(this,function(t,e){var n=function(t){function e(t,e){Array.isArray(a[t])||(a[t]=[]),"function"==typeof e&&a[t].push(e)}function n(t,e){return Array.isArray(a[t])&&"function"==typeof e||(a[t]=[]),a.splice(a.indexOf(e),1)}function i(t){var e=JSON.parse(t.data);Array.isArray(a[e.type])||(a[e.type]=[]),(a[e.type]||[]).forEach(function(n){n.apply(t,e.arguments)})}function s(){o||(o=!0,t.addEventListener("message",i))}function r(){o&&(o=!1,t.removeEventListener("message",i))}var o=!1,a={};this.start=s,this.stop=r,this.addEventListener=e,this.removeEventListener=n,this.dispatchEvent=i,this.on=e,this.off=n,this.emit=i,this.start()};return e.connect=function(t){var e=new EventSource(t);return new n(e)},e});